# 나만의 조-이스틱 만들기(Toy project)
---
철권7 및 여러 게임을 좀 더 즐겁게 즐기기 위해 나만의 조-이스틱을 제작했습니다.
Googling과 Stack Overflow, Arduino community를 뒤져가며 만들었습니다.
더 많은 분들이 키보드가 아닌, 스틱으로 철권을 즐기길 바라며 Github에 업로드 합니다.

### 1. 필요한 재료들
---
- arduino leonardo(추천)
  * arduino uno로도 제작할 수는 있지만, 기본적으로 ATMEGA328 32u4 칩셋을 포함한 leonardo를 사용하면 arduino IDE에서 사용하는 Keyboard 라이브러리를 바로 사용가능합니다. 이유는 ATMEGA328 32u4에서 HID를 지원하지만, uno 및 ATMEGA328 16u2 또는 ATMEGA328P 칩셋을 포함한 보드는 firmware를 수정하는 작업이 필요합니다. 이 때, 보드가 벽돌이 될 수 있어 6600원짜리 중국산 leonardo 보드를 구매하여 제작했습니다.
- 레버 및 버튼
  * 레버는 삼덕사 제품을 이용했습니다. 버튼은 산와버튼을 구매했습니다. 대략 레버 15000원, 버튼 각 3000원 정도 선에서 구매 가능합니다.
- 조이스틱 통(튼튼하면 됨)
  * 집에 목공 도구가 부족하여 단단한 하드보드지 상자를 구매해서 조각칼을 이용하여 제작했습니다. 더 튼튼하고 목공 도구 또는 아크릴 제작 의뢰가 가능하시면 버튼 크기에 맞게 설계해서 쓰시면 됩니다.
- 배선
  * 기본적인 전선 및 arduino에 쉽게 연결가능한 male-male 선을 사용했습니다.
- 땜납 및 인두기
  * 기본적으로 하실 수 있는 분이면 직접 하시고, 납땜을 해보지 않으신 분들은 주변 전기공학과 친구들을 활용하시면 됩니다. 이마저도 어려우시다면 각 전극에 전선을 잘 연결하시면 됩니다.

### 2. 하드웨어 조립
---
- 삼덕사 4방향 레버의 경우, 총 4개의 스위치가 있으며, 1개의 스위치 당 하나의 arduino pin 연결 부위와 GND에 연결하는 부분 하나를 가집니다. 레버 종류에 맞게 제공되는 선을 연결하면 4개의 input, 1개의 GND 연결 부위를 arduino의 GND, digital pin에 연결하시면 됩니다. arduino는 기본적으로 핀이 부족하므로, analog pin을 digital input을 받도록 software적으로 변경하면 됩니다.
- 각 버튼은 1개의 input, 1개의 GND로 구성되어 있습니다. 해당 핀에 납땝 또는 전선을 연결하여 모든 버튼의 GND를 하나로 묶어 arduino의 GND에 연결하시면 됩니다. 각 input의 경우 digital pin에 1, 2번과 13번을 제외한 곳에 연결해주시면 됩니다.

### 3. 소프트웨어 컴파일
---
- arduino IDE를 이용하여 각 버튼의 pull-up 저항을 주도록 설정합니다. 이를 통해 특별한 물리적인 저항 연결 없이 조립이 가능합니다. analog pin의 경우 A0, A1 등 digital pin으로 사용하도록 미리 정의된 변수를 이용합니다.
- 라이브러리 추가에서 Keyboard를 추가하고, 다운로드 합니다.
- 업로드한 코드를 컴파일 후 업로드 하기 위해 보드 설정은 leonardo를(uno나 기타 다른 보드를 사용중이시면 맞는 보드 선택) 선택 후 보드가 연결된 포트를 설정해줍니다. 이후 해당 코드를 업로드 후 각 버튼이 의도한대로 눌리는지 확인 후 핀 번호를 수정해줍니다.
- 코드는 세 종류를 업로드 하였습니다. key mapping 버전은 키보드의 키와 직접 매핑할 수 있습니다. device는 다른 능력자 분의 라이브러리를 사용하였습니다. (출처 : https://github.com/MHeironimus/ArduinoJoystickLibrary) 해당 코드 업로드 시, 컨트롤러 장치로 인식합니다. 마지막으로, dpad는 8방향의 십자키로 인식하게끔 작성된 코드입니다. 메뉴 이동이나 십자키 조작이 필요할 경우 사용하시면 됩니다.

### 4. 참조
---
- https://github.com/MHeironimus/ArduinoJoystickLibrary
- https://m.blog.naver.com/junhoda6263